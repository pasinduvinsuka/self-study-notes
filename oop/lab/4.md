Interface TicketRetrievalStrategy

package core;

public interface TicketRetrievalStrategy{

	String retriveTicket();
	
}


===========================================================
PriorityRetrieval class

package core;

public class PriorityRetrieval implements TicketRetrievalStrategy{
	
	private final TicketPool ticketPool;
	
	public PriorityRetrieval(TicketPool ticketPool){
		this.ticketPool = ticketPool;
	}
	
	@Override
	public String retriveTicket(){
		return ticketPool.removeTicket();
	}
}



====================================================================
IdRetrieval Class

package core;

public class IdRetrieval implements TicketRetrievalStrategy{
	
	private final TicketPool ticketPool;
	private String ticketID;
	
	public IdRetrieval(TicketPool ticketPool, String ticketID){
		this.ticketPool = ticketPool;
		this.ticketID = ticketID;
	}
	
	//Possible Way 01	
//	@Override
//	public String retriveTicket(){
//		return ticketPool.RemoveTicketById(ticketID);
//	}
	
	
	//Possible Way 02	
	@Override
	public String retriveTicket(){
		List<String> tickets = ticketPool.getTickets();

		if(!tickets.isEmpty){
			if(ticket.remove(ticketID)){
				return ticketID;
			}
		}
		return null;
	}
}


==================================================================
Possible Way 1


Update TicketPool - add method

package core;
import java.util.Collections;
import java.util.LinkedList;
import java.util.List;

public class TicketPool implements TicketOperation {
	private final List<String> tickets = Collections.synchronizedList(new LinkedList<>());
	
	@Override
	public synchronized void addTickets(String ticket) {
		tickets.add(ticket);
	}
	
	@Override
	public synchronized String removeTicket() {
		return tickets.isEmpty() ? null : tickets.remove(0);
	}
	
	public int getTicketCount() {
		return tickets.size();
	}
	
	public synchronized String RemoveTicketById(String ticketID){
		if(!tickets.isEmpty){
			if(ticket.remove(ticketID)){
				return ticketID;
			}
		}
		return null;
	}
}


============================================================================
Possible Way 2

Update TicketPool - tickets list getter 

package core;
import java.util.Collections;
import java.util.LinkedList;
import java.util.List;

public class TicketPool implements TicketOperation {
	private final List<String> tickets = Collections.synchronizedList(new LinkedList<>());
	
	@Override
	public synchronized void addTickets(String ticket) {
		tickets.add(ticket);
	}
	
	@Override
	public synchronized String removeTicket() {
		return tickets.isEmpty() ? null : tickets.remove(0);
	}
	
	public int getTicketCount() {
		return tickets.size();
	}
	
	public List<String> getTickets(){
		return tickets;
	}
}

=========================================================================
Customer class

package threads;
import logging.Logger;

public class Customer implements Runnable {
	
	private final TicketRetrievalStrategy ticketRetrievalStrategy;
	
	public Customer(TicketRetrievalStrategy ticketRetrievalStrategy) {
		this.ticketRetrievalStrategy = ticketRetrievalStrategy;
	}
	
	@Override
	public void run() {
		ticketRetrievalStrategy.retriveTicket();
		
		try{
			Thread.sleep(5000);
		}catch(InterruptedException e){
			Logger.log("Customer thread interrupted.");
		}
	}
	
}


===========================================================================
Test class

import core.TicketPool;

public class TestCustomer{

	public static void main(String[] args){
	
		TicketPool ticketPool = new TicketPool();
		
		ticketPool.addTickets("P-1");
		ticketPool.addTickets("T-1");
		
		ticketPool.addTickets("P-2");
		ticketPool.addTickets("T-1");
		
		
		TicketRetrievalStrategy priorityRemove = new PriorityRetrieval(ticketPool);
		TicketRetrievalStrategy idRemove = new IdRetrieval(ticketPool, "T-1");
		
		Customer priorityCustomer = new Customer(priorityRemove);
		Customer idCustomer = new Customer(idRemove);
		
		Thread priorityThread = new Thread(priorityCustomer);
		Thread idThread = new Thread(idCustomer);
		
		priorityThread.start();
		idThread.start();
		
		try{
		
			priorityThread.join();
			idThread.join();
		
		}catch(InterruptedException e){
			Logger.log("Main thread interrupted.");
		}
		
	}

}
